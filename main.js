(()=>{"use strict";var e=document.querySelector(".profile__button_type_edit"),t=document.querySelector(".profile__button_type_add"),n=(document.querySelector(".cards__button_type_del"),document.querySelector(".profile__avatar")),r=document.querySelector(".popup_theme_profile"),o=document.querySelector(".popup_theme_place"),i=document.querySelector(".popup_theme_image"),a=document.querySelector(".popup_theme_avatar"),u=document.querySelector(".popup_theme_delete"),c=document.querySelector(".popup__button-close_theme_profile"),s=document.querySelector(".popup__button-close_theme_place"),l=document.querySelector(".popup__button-close_theme_image"),f=document.querySelector(".popup__button-close_theme_avatar"),p=document.querySelector(".popup__button-close_theme_delete"),h=i.querySelector(".popup__photo"),_=i.querySelector(".popup__photo-title"),d=document.querySelector(".profile__name"),y=document.querySelector(".profile__text"),v=document.querySelector(".profile__image"),m=document.querySelector(".popup__item_type_name"),b=document.querySelector(".popup__item_type_info"),k=document.querySelector(".popup__container"),g=(document.querySelector(".popup__form"),k.querySelector("form[name=record]")),w=a.querySelector("form[name=photo]"),S=(document.querySelector(".popup__form_theme_place"),o.querySelector("form[name=cards]")),E=(document.querySelector(".popup__item_type_newname"),document.querySelector(".popup__item_type_link"),document.querySelector(".cards"));function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}document.querySelector(".popup__button-save_yes");var C=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._selectorTemplate=n,this._onImageClick=r.imageClick,this._onRemove=r.remove,this._onLike=r.like,this._removeLike=r.removeLike,this._element=this._getTemplate(),this._image=this._element.querySelector(".cards__image"),this._title=this._element.querySelector(".cards__title"),this._likeButton=this._element.querySelector(".cards__button_type_like"),this._removeButton=this._element.querySelector(".cards__button_type_del"),this._likeCount=this._element.querySelector(".cards__like-number"),this._isLiked=this._data.likes.find((function(e){return e._id===o._data.currentUserId})),this._image.src=this._data.link,this._image.alt=this._data.name,this._title.textContent=this._data.name,this._likeCount.textContent=this._data.likes.length,this._setEventListeners()}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selectorTemplate).content.querySelector(".cards__item").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._handlerLike()})),this._data.owner._id===this._data.currentUserId?this._removeButton.addEventListener("click",(function(){e._onRemove(e._data,(function(){return e._handlerRemove()}))})):this._removeButton.remove(),this._image.addEventListener("click",(function(){e._onImageClick(e._data)})),this._isLiked&&this._likeButton.classList.add("cards__button_type_like-active")}},{key:"_handlerLike",value:function(){var e=this;this._isLiked=this._data.likes.find((function(t){return t._id===e._data.currentUserId})),this._isLiked?this._removeLike(this._data,(function(t){console.log("Работаю removeLike",{newLikes:t}),e._likeButton.classList.remove("cards__button_type_like-active"),e._data.likes=t,e._likeCount.textContent=e._data.likes.length})):this._onLike(this._data,(function(t){console.log("Работаю onLike",{newLikes:t}),e._likeButton.classList.add("cards__button_type_like-active"),e._data.likes=t,e._likeCount.textContent=e._data.likes.length}))}},{key:"_handlerRemove",value:function(){this._element.remove(),this._element=null}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"addNewItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"deleteMistakes",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState()}},{key:"disableButton",value:function(){this._buttonElement.setAttribute("disabled",!0),this._buttonElement.classList.add(this._config.inactiveButtonClass)}},{key:"enableButton",value:function(){this._buttonElement.removeAttribute("disabled",!1),this._buttonElement.classList.remove(this._config.inactiveButtonClass)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableButton():this.enableButton()}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.textContent=t,n.classList.add(this._config.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));t.textContent="",e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass)}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const R={formSelector:".popup__form",inputSelector:".popup__item",submitButtonSelector:".popup__button-save",inactiveButtonClass:"popup__button_inactive",inputErrorClass:"popup__item_type_error",errorClass:"popup__item-error_active"};function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._closeButton=n,this._saveButton=this._popup.querySelector(".popup__button-save"),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleOverlayClose",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",(function(){e.close()})),this._popup.addEventListener("click",(function(t){e._handleOverlayClose(t)}))}},{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"addSaving",value:function(){this._saveButton.textContent="Сохранение..."}},{key:"deleteSaving",value:function(e){this._saveButton.textContent=e}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=A(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(this,arguments)}function A(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function V(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(r);if(o){var n=N(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return V(this,e)});function a(e,t,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(o=i.call(this,e,t))._image=n,o._title=r,o}return t=a,(n=[{key:"open",value:function(e){var t=e.data;this._image.src=t.link,this._image.alt=t.name,this._title.textContent=t.name,x(N(a.prototype),"open",this).call(this)}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(B);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=z(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},H.apply(this,arguments)}function z(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function F(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(r);if(o){var n=K(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return F(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,n))._handleSubmit=t,r._form=r._popup.querySelector(".popup__form"),r._inputList=r._form.querySelectorAll(".popup__item"),r._setEventListeners=r.setEventListeners(),r}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._getInputValues())})),H(K(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._form.reset(),H(K(a.prototype),"close",this).call(this)}}])&&G(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(B);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var X=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._info=n,this._avatar=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._info.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about,r=e._id;this._name.textContent=t,this._info.textContent=n,this._id=r}},{key:"setUserAvatar",value:function(e){var t=e.avatar;this._avatar.src=t}}])&&W(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(){return ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=te(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ee.apply(this,arguments)}function te(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function re(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oe(r);if(o){var n=oe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return re(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,n))._handleSubmit=t,r._form=r._popup.querySelector(".popup__form"),r}return t=a,(n=[{key:"open",value:function(e,t){ee(oe(a.prototype),"open",this).call(this),this._currentData=e,this._removeCallback=t}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._currentData,e._removeCallback)})),ee(oe(a.prototype),"setEventListeners",this).call(this)}}])&&Z(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(B);function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=new(function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"setUserInfo",value:function(e){var t=this,n=e.name,r=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:n,about:r})}).then((function(e){return t._handleResponse(e)}))}},{key:"setNewCard",value:function(e){var t=this,n=e.name,r=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:n,link:r})}).then((function(e){return t._handleResponse(e)}))}},{key:"setProfileAvatar",value:function(e){var t=this,n=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:n})}).then((function(e){return t._handleResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleResponse(e)}))}},{key:"likeCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._handleResponse(e)}))}},{key:"likeRemove",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleResponse(e)}))}}])&&ae(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-48",headers:{authorization:"2416fc82-bfbc-4b78-a4fd-442dace64f7e","Content-Type":"application/json"}}),se=new q(R,g);se.enableValidation();var le=new q(R,S);le.enableValidation();var fe=new q(R,w);fe.enableValidation();var pe=new X(d,y,v),he=new ie(u,(function(e,t){he.addSaving(),ce.deleteCard(e._id).then((function(){t(),he.close()})).catch((function(e){console.log(e)})).finally((function(){return he.deleteSaving("Да")}))}),p),_e=new M(i,l,h,_);_e.setEventListeners(),he.setEventListeners();var de=new Q(r,(function(e){var t=e.name,n=e.job;de.addSaving(),ce.setUserInfo({name:t,about:n}).then((function(e){pe.setUserInfo({name:e.name,about:e.about}),de.close()})).catch((function(e){console.log(e)})).finally((function(){return de.deleteSaving("Сохранить")}))}),c),ye=new Q(o,(function(e){ye.addSaving(),ce.setNewCard({name:e.newname,link:e.link}).then((function(e){ke.addNewItem(be(e)),ye.close()})).catch((function(e){console.log(e)})).finally((function(){return ye.deleteSaving("Создать")}))}),s),ve=new Q(a,(function(e){var t=e.avatar;ve.addSaving(),ce.setProfileAvatar({avatar:t}).then((function(e){pe.setUserAvatar({avatar:e.avatar}),ve.close()})).catch((function(e){console.log(e)})).finally((function(){return ve.deleteSaving("Сохранить")}))}),f),me=0,be=function(e){return e.currentUserId=me,new C(e,"#card-template",{imageClick:Ee,remove:Se,like:ge,removeLike:we}).generateCard()},ke=new j({renderer:function(e){ke.addItem(be(e))}},E);function ge(e,t){ce.likeCard(e._id).then((function(e){t(e.likes)})).catch((function(e){console.log(e)}))}function we(e,t){ce.likeRemove(e._id).then((function(e){t(e.likes)})).catch((function(e){console.log(e)}))}function Se(e,t){he.open(e,t)}function Ee(e){var t=e.name,n=e.link;_e.open({data:{name:t,link:n}})}e.addEventListener("click",(function(){var e=pe.getUserInfo();m.value=e.name,b.value=e.job,de.open(),se.deleteMistakes()})),t.addEventListener("click",(function(){S.reset(),le.deleteMistakes(),ye.open()})),n.addEventListener("click",(function(){fe.deleteMistakes(),ve.open()})),Promise.all([ce.getUserInfo(),ce.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];pe.setUserInfo(o),pe.setUserAvatar(o),me=o._id,ke.renderItems(i,o._id)})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T2tGLEVBQUk5RyxJQUNsQyxJQUNBb0ksT0FBTSxTQUFDQyxHQUNObkgsUUFBUUMsSUFBSWtILEVBQ2IsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25maWcuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBidXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b25fdHlwZV9lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uX3R5cGVfYWRkXCIpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkRlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2J1dHRvbl90eXBlX2RlbFwiKTtcbmV4cG9ydCBjb25zdCBidXR0b25FZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90aGVtZV9wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3RoZW1lX3BsYWNlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdGhlbWVfaW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcG9wdXBBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3RoZW1lX2F2YXRhclwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cERlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdGhlbWVfZGVsZXRlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQ2xvc2VCdXR0b25Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2J1dHRvbi1jbG9zZV90aGVtZV9wcm9maWxlXCJcbik7XG5leHBvcnQgY29uc3QgcG9wdXBDbG9zZUJ1dHRvblBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2J1dHRvbi1jbG9zZV90aGVtZV9wbGFjZVwiXG4pO1xuZXhwb3J0IGNvbnN0IHBvcHVwQ2xvc2VCdXR0b25JbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19idXR0b24tY2xvc2VfdGhlbWVfaW1hZ2VcIlxuKTtcbmV4cG9ydCBjb25zdCBwb3B1cENsb3NlQnV0dG9uQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2J1dHRvbi1jbG9zZV90aGVtZV9hdmF0YXJcIlxuKTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwQ2xvc2VCdXR0b25Db25maXJtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2J1dHRvbi1jbG9zZV90aGVtZV9kZWxldGVcIlxuKTtcbmV4cG9ydCBjb25zdCBwb3B1cEltZyA9IHBvcHVwQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19waG90b1wiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFRpdGxlID0gcG9wdXBDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3Bob3RvLXRpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190ZXh0XCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2l0ZW1fdHlwZV9uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faXRlbV90eXBlX2luZm9cIik7XG5leHBvcnQgY29uc3QgcG9wdXBDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jb250YWluZXJcIik7XG5leHBvcnQgY29uc3QgcG9wdXBGb3JtTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgZm9ybUFkZE5hbWUgPSBwb3B1cENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiZm9ybVtuYW1lPXJlY29yZF1cIik7XG5leHBvcnQgY29uc3QgZm9ybUFkZEF2YXRhciA9IHBvcHVwQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoXCJmb3JtW25hbWU9cGhvdG9dXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1Db250YWluZXJDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fdGhlbWVfcGxhY2VcIik7XG5leHBvcnQgY29uc3QgZm9ybUFkZENhcmRzID0gcG9wdXBQbGFjZS5xdWVyeVNlbGVjdG9yKFwiZm9ybVtuYW1lPWNhcmRzXVwiKTtcbmV4cG9ydCBjb25zdCBmb3JtSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faXRlbV90eXBlX25ld25hbWVcIik7XG5leHBvcnQgY29uc3QgZm9ybUlucHV0SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pdGVtX3R5cGVfbGlua1wiKTtcbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNcIik7XG5leHBvcnQgY29uc3QgYnV0dG9uRGVsZXRlQ29uZmlybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvbi1zYXZlX3llc1wiKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBzZWxlY3RvclRlbXBsYXRlLCBoYW5kbGVyKSB7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5fc2VsZWN0b3JUZW1wbGF0ZSA9IHNlbGVjdG9yVGVtcGxhdGU7XG4gICAgdGhpcy5fb25JbWFnZUNsaWNrID0gaGFuZGxlci5pbWFnZUNsaWNrO1xuICAgIHRoaXMuX29uUmVtb3ZlID0gaGFuZGxlci5yZW1vdmU7XG4gICAgdGhpcy5fb25MaWtlID0gaGFuZGxlci5saWtlO1xuICAgIHRoaXMuX3JlbW92ZUxpa2UgPSBoYW5kbGVyLnJlbW92ZUxpa2U7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19faW1hZ2VcIik7XG4gICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2J1dHRvbl90eXBlX2xpa2VcIik7XG5cbiAgICB0aGlzLl9yZW1vdmVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2J1dHRvbl90eXBlX2RlbFwiKTtcbiAgICB0aGlzLl9saWtlQ291bnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpa2UtbnVtYmVyXCIpO1xuXG4gICAgdGhpcy5faXNMaWtlZCA9IHRoaXMuX2RhdGEubGlrZXMuZmluZChcbiAgICAgIChpdGVtKSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fZGF0YS5jdXJyZW50VXNlcklkXG4gICAgKTtcblxuXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fZGF0YS5saW5rO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRoaXMuX2RhdGEubmFtZTtcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcbiAgICB0aGlzLl9saWtlQ291bnQudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIC8vINC30LDQsdC40YDQsNC10Lwg0YDQsNC30LzQtdGC0LrRgyDQuNC3IEhUTUwg0Lgg0LrQu9C+0L3QuNGA0YPQtdC8INGN0LvQtdC80LXQvdGCXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JUZW1wbGF0ZSkgLy8g0LjRgdC/0L7Qu9GM0LfRg9C10LwgdGhpcy5fc2VsZWN0b3JUZW1wbGF0ZVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19faXRlbVwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIC8vINCy0LXRgNC90ZHQvCBET00t0Y3Qu9C10LzQtdC90YIg0LrQsNGA0YLQvtGH0LrQuFxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcblxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZXJMaWtlKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBpc093bmVyID0gdGhpcy5fZGF0YS5vd25lci5faWQgPT09IHRoaXMuX2RhdGEuY3VycmVudFVzZXJJZDtcbiAgICBpZiAoaXNPd25lcikge1xuICAgICAgdGhpcy5fcmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX29uUmVtb3ZlKHRoaXMuX2RhdGEsICgpID0+IHRoaXMuX2hhbmRsZXJSZW1vdmUoKSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVtb3ZlQnV0dG9uLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9vbkltYWdlQ2xpY2sodGhpcy5fZGF0YSk7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5faXNMaWtlZClcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRzX19idXR0b25fdHlwZV9saWtlLWFjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVyTGlrZSgpIHtcbiAgICB0aGlzLl9pc0xpa2VkID0gdGhpcy5fZGF0YS5saWtlcy5maW5kKFxuICAgICAgKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLl9kYXRhLmN1cnJlbnRVc2VySWRcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUxpa2UodGhpcy5fZGF0YSwgKG5ld0xpa2VzKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi0KDQsNCx0L7RgtCw0Y4gcmVtb3ZlTGlrZVwiLCB7IG5ld0xpa2VzIH0pO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkc19fYnV0dG9uX3R5cGVfbGlrZS1hY3RpdmVcIik7XG4gICAgICAgIHRoaXMuX2RhdGEubGlrZXMgPSBuZXdMaWtlcztcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50LnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fb25MaWtlKHRoaXMuX2RhdGEsIChuZXdMaWtlcykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcItCg0LDQsdC+0YLQsNGOIG9uTGlrZVwiLCB7IG5ld0xpa2VzIH0pO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkc19fYnV0dG9uX3R5cGVfbGlrZS1hY3RpdmVcIik7XG4gICAgICAgIHRoaXMuX2RhdGEubGlrZXMgPSBuZXdMaWtlcztcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50LnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlclJlbW92ZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG5cbiBcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG5cbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIGFkZE5ld0l0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiBcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG5cbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gIH1cblxuICAvL9Cf0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INCy0LDQu9C40LTQsNGG0LjQuFxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvLyDQodC70YPRiNCw0YLQtdC70Ywg0YHQvtCx0YvRgtC40LlcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuXG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG5cbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIC8vINCc0LXRgtC+0LQsINC60L7RgtC+0YDRi9C5INC+0YfQuNGJ0LDQtdGCINC+0YjQuNCx0LrRg1xuICBkZWxldGVNaXN0YWtlcygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICAvLyDQnNC10YLQvtC0LCDQutC+0YLQvtGA0YvQuSDQvtGC0LrQu9GO0YfQsNC10YIg0LrQvdC+0L/QutGDXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG5cbiAgLy8g0JzQtdGC0L7QtCwg0LrQvtGC0L7RgNGL0Lkg0LLQutC70Y7Rh9Cw0LXRgiDQutC90L7Qv9C60YNcbiAgZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cblxuICAvLyDQnNC10YLQvtC0LCDQutC+0YLQvtGA0YvQuSDRgdGC0LjQu9C40LfRg9C10YIg0LrQvdC+0L/QutGDINC4INC00LXQu9Cw0LXRgiDQutC90L7Qv9C60YMg0LDQutGC0LjQstC90L7QuSDQuNC70Lgg0L3QtdGCXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICAvLyDQldGB0LvQuCDQtdGB0YLRjCDRhdC+0YLRjyDQsdGLINC+0LTQuNC9INC90LXQstCw0LvQuNC00L3Ri9C5INC40L3Qv9GD0YJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIC8vINGB0LTQtdC70LDQuSDQutC90L7Qv9C60YMg0L3QtdCw0LrRgtC40LLQvdC+0LlcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDQuNC90LDRh9C1INGB0LTQtdC70LDQuSDQutC90L7Qv9C60YMg0LDQutGC0LjQstC90L7QuVxuICAgICAgdGhpcy5lbmFibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICAvLyDQnNC10YLQvtC0LCDQutC+0YLQvtGA0YvQuSDQv9GA0L7QstC10YDRj9C10YIg0LLRgdC1INC/0L7Qu9GPINGE0L7RgNC80YtcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICAvLyDQv9GA0L7RhdC+0LTQuNC8INC/0L4g0Y3RgtC+0LzRgyDQvNCw0YHRgdC40LLRgyDQvNC10YLQvtC00L7QvCBzb21lXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIC8vINCV0YHQu9C4INC/0L7Qu9C1INC90LUg0LLQsNC70LjQtNC90L4sINC60L7Qu9Cx0Y3QuiDQstC10YDQvdGR0YIgdHJ1ZVxuICAgICAgLy8g0J7QsdGF0L7QtCDQvNCw0YHRgdC40LLQsCDQv9GA0LXQutGA0LDRgtC40YLRgdGPINC4INCy0YHRjyDRhNGD0L3QutGG0LjRj1xuICAgICAgLy8gaGFzSW52YWxpZElucHV0INCy0LXRgNC90ZHRgiB0cnVlXG5cbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g0JzQtdGC0L7QtCwg0LrQvtGC0L7RgNGL0Lkg0LTQtdC70LDQtdGCINCy0LDQu9C40LTQsNGG0LjRjiDQv9C+0LvRj1xuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLy8g0JzQtdGC0L7QtCwg0LrQvtGC0L7RgNGL0Lkg0LTQvtCx0LDQstC70Y/QtdGCINC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LlcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgLy8g0J3QsNGF0L7QtNC40Lwg0Y3Qu9C10LzQtdC90YIg0L7RiNC40LHQutC4INCy0L3Rg9GC0YDQuCDRgdCw0LzQvtC5INGE0YPQvdC60YbQuNC4XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgLy8g0JzQtdGC0L7QtCwg0LrQvtGC0L7RgNGL0Lkg0YPQtNCw0LvRj9C10YIg0LrQu9Cw0YHRgSDRgSDQvtGI0LjQsdC60L7QuVxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgLy8g0J3QsNGF0L7QtNC40Lwg0Y3Qu9C10LzQtdC90YIg0L7RiNC40LHQutC4XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pdGVtJyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbi1zYXZlJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25faW5hY3RpdmUnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faXRlbV90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pdGVtLWVycm9yX2FjdGl2ZSdcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGJ1dHRvbkNsb3NlKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cFNlbGVjdG9yO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gYnV0dG9uQ2xvc2U7XG4gICAgdGhpcy5fc2F2ZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLXNhdmUnKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHRoaXMuY2xvc2UoKTtcbiAgfVxuXG4gIF9oYW5kbGVPdmVybGF5Q2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB0aGlzLmNsb3NlKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZShldnQpO1xuICAgIH0pO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgYWRkU2F2aW5nKCkge1xuICAgIHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICB9XG5cbiAgZGVsZXRlU2F2aW5nKHNhdmVCdXR0b25UaXRsZSkge1xuICAgIHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQgPSBzYXZlQnV0dG9uVGl0bGU7XG4gIH1cblxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBidXR0b25DbG9zZSwgcG9wdXBJbWcsIHBvcHVwVGl0bGUpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yLCBidXR0b25DbG9zZSk7XG4gICAgdGhpcy5faW1hZ2UgPSBwb3B1cEltZztcbiAgICB0aGlzLl90aXRsZSA9IHBvcHVwVGl0bGU7XG4gIH1cblxuICBvcGVuKHtkYXRhfSkge1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4vLyBuYW1lLCBsaW5rXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0LCBidXR0b25DbG9zZSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IsIGJ1dHRvbkNsb3NlKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pdGVtXCIpO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMgPSB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgXG4gICAgfSk7XG5cbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZSwgam9iLCBhdmF0YXIpIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9pbmZvID0gam9iO1xuICAgIHRoaXMuX2F2YXRhciA9IGF2YXRhcjtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl9pbmZvLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBfaWR9KSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5faW5mby50ZXh0Q29udGVudCA9IGFib3V0O1xuICAgICB0aGlzLl9pZCA9IF9pZDtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoeyBhdmF0YXIgfSkge1xuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XG4gIH1cblxuICBcbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCwgYnV0dG9uQ2xvc2UpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yLCBidXR0b25DbG9zZSk7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICB9XG5cbiAgb3BlbihjdXJyZW50RGF0YSwgcmVtb3ZlQ2FsbGJhY2spIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fY3VycmVudERhdGEgPSBjdXJyZW50RGF0YTtcbiAgICB0aGlzLl9yZW1vdmVDYWxsYmFjayA9IHJlbW92ZUNhbGxiYWNrO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fY3VycmVudERhdGEsIHRoaXMuX3JlbW92ZUNhbGxiYWNrKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQge1xuICBidXR0b25FZGl0LFxuICBidXR0b25BZGQsXG4gIHBvcHVwUHJvZmlsZSxcbiAgcG9wdXBQbGFjZSxcbiAgcG9wdXBDYXJkLFxuICBwb3B1cEF2YXRhcixcbiAgcG9wdXBDbG9zZUJ1dHRvblByb2ZpbGUsXG4gIHBvcHVwQ2xvc2VCdXR0b25QbGFjZSxcbiAgcG9wdXBDbG9zZUJ1dHRvbkltYWdlLFxuICBwb3B1cENsb3NlQnV0dG9uQXZhdGFyLFxuICBwb3B1cEltZyxcbiAgcG9wdXBUaXRsZSxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVJbmZvLFxuICBuYW1lSW5wdXQsXG4gIGpvYklucHV0LFxuICBmb3JtQWRkTmFtZSxcbiAgZm9ybUFkZEF2YXRhcixcbiAgZm9ybUFkZENhcmRzLFxuICBmb3JtSW5wdXROYW1lLFxuICBmb3JtSW5wdXRJbWFnZSxcbiAgY2FyZHNDb250YWluZXIsXG4gIGJ1dHRvbkVkaXRBdmF0YXIsXG4gIHByb2ZpbGVBdmF0YXIsXG4gIHBvcHVwRGVsLFxuICBwb3B1cENsb3NlQnV0dG9uQ29uZmlybSxcbiAgYnV0dG9uRGVsLFxuICBidXR0b25EZWxldGVDb25maXJtLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL3V0aWxzL2NvbmZpZy5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQ4XCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjI0MTZmYzgyLWJmYmMtNGI3OC1hNGZkLTQ0MmRhY2U2NGY3ZVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbi8v0LTQvtCx0LDQstC70Y/QtdC8INCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvNCw0LxcbmNvbnN0IGZvcm1WYWxpZGF0b3JBZGROYW1lID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtQWRkTmFtZSk7XG5mb3JtVmFsaWRhdG9yQWRkTmFtZS5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JBZGRDYXJkcyA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUFkZENhcmRzKTtcbmZvcm1WYWxpZGF0b3JBZGRDYXJkcy5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JBZGRBdmF0YXIgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1BZGRBdmF0YXIpO1xuZm9ybVZhbGlkYXRvckFkZEF2YXRhci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHVzZXJJbmZvRGF0YSA9IG5ldyBVc2VySW5mbyhwcm9maWxlTmFtZSwgcHJvZmlsZUluZm8sIHByb2ZpbGVBdmF0YXIpO1xuXG5jb25zdCBwb3B1cENvbmZpcm0gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxuICBwb3B1cERlbCxcbiAgZGVsZXRlRm9ybUNhcmQsXG4gIHBvcHVwQ2xvc2VCdXR0b25Db25maXJtXG4pO1xuXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFxuICBwb3B1cENhcmQsXG4gIHBvcHVwQ2xvc2VCdXR0b25JbWFnZSxcbiAgcG9wdXBJbWcsXG4gIHBvcHVwVGl0bGVcbik7XG5cbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwQ29uZmlybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEZvcm1Qcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHBvcHVwUHJvZmlsZSxcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQsXG4gIHBvcHVwQ2xvc2VCdXR0b25Qcm9maWxlXG4pO1xuXG5jb25zdCBwb3B1cEZvcm1DYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHBvcHVwUGxhY2UsXG4gIGhhbmRsZUNhcmRzU3VibWl0LFxuICBwb3B1cENsb3NlQnV0dG9uUGxhY2Vcbik7XG5cbmNvbnN0IHBvcHVwRm9ybUF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBwb3B1cEF2YXRhcixcbiAgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCxcbiAgcG9wdXBDbG9zZUJ1dHRvbkF2YXRhclxuKTtcblxubGV0IGN1cnJlbnRVc2VySWQgPSAwO1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcbiAgZGF0YS5jdXJyZW50VXNlcklkID0gY3VycmVudFVzZXJJZDtcblxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCB7XG4gICAgaW1hZ2VDbGljazogaGFuZGxlQ2FyZENsaWNrLFxuICAgIHJlbW92ZTogaGFuZGxlT3BlbkNvbmZpcm1Qb3B1cCxcbiAgICBsaWtlOiBoYW5kbGVMaWtlQ2xpY2ssXG4gICAgcmVtb3ZlTGlrZTogaGFuZGxlTGlrZVJlbW92ZSxcbiAgfSk7XG5cbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59O1xuXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gICAgfSxcbiAgfSxcbiAgY2FyZHNDb250YWluZXJcbik7XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjdXJyZW50RGF0YSwgbGlrZUNhbGxiYWNrKSB7XG4gIGFwaVxuICAgIC5saWtlQ2FyZChjdXJyZW50RGF0YS5faWQpXG4gICAgLnRoZW4oKHVwZGF0ZWREYXRhKSA9PiB7XG4gICAgICBsaWtlQ2FsbGJhY2sodXBkYXRlZERhdGEubGlrZXMpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VSZW1vdmUoY3VycmVudERhdGEsIGxpa2VDYWxsYmFjaykge1xuICBhcGlcbiAgICAubGlrZVJlbW92ZShjdXJyZW50RGF0YS5faWQpXG4gICAgLnRoZW4oKHVwZGF0ZWREYXRhKSA9PiB7XG4gICAgICBsaWtlQ2FsbGJhY2sodXBkYXRlZERhdGEubGlrZXMpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU9wZW5Db25maXJtUG9wdXAoY3VycmVudERhdGEsIHJlbW92ZUNhbGxiYWNrKSB7XG4gIHBvcHVwQ29uZmlybS5vcGVuKGN1cnJlbnREYXRhLCByZW1vdmVDYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUZvcm1DYXJkKGN1cnJlbnREYXRhLCByZW1vdmVDYWxsYmFjaykge1xuICBwb3B1cENvbmZpcm0uYWRkU2F2aW5nKCk7XG5cbiAgYXBpXG4gICAgLmRlbGV0ZUNhcmQoY3VycmVudERhdGEuX2lkKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHJlbW92ZUNhbGxiYWNrKCk7XG4gICAgICBwb3B1cENvbmZpcm0uY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4gcG9wdXBDb25maXJtLmRlbGV0ZVNhdmluZyhcItCU0LBcIikpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkc1N1Ym1pdChkYXRhKSB7XG4gIHBvcHVwRm9ybUNhcmQuYWRkU2F2aW5nKCk7XG4gIGFwaVxuICAgIC5zZXROZXdDYXJkKHsgbmFtZTogZGF0YS5uZXduYW1lLCBsaW5rOiBkYXRhLmxpbmsgfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjYXJkc0xpc3QuYWRkTmV3SXRlbShcbiAgICAgICAgY3JlYXRlQ2FyZChyZXMsIFwiI2NhcmQtdGVtcGxhdGVcIiwge1xuICAgICAgICAgIGltYWdlQ2xpY2s6IGhhbmRsZUNhcmRDbGljayxcbiAgICAgICAgICByZW1vdmU6IGhhbmRsZU9wZW5Db25maXJtUG9wdXAsXG4gICAgICAgICAgbGlrZTogaGFuZGxlTGlrZUNsaWNrLFxuICAgICAgICAgIHJlbW92ZUxpa2U6IGhhbmRsZUxpa2VSZW1vdmUsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgcG9wdXBGb3JtQ2FyZC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cEZvcm1DYXJkLmRlbGV0ZVNhdmluZyhcItCh0L7Qt9C00LDRgtGMXCIpKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoeyBuYW1lLCBqb2IgfSkge1xuICBwb3B1cEZvcm1Qcm9maWxlLmFkZFNhdmluZygpO1xuICBhcGlcbiAgICAuc2V0VXNlckluZm8oeyBuYW1lOiBuYW1lLCBhYm91dDogam9iIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgdXNlckluZm9EYXRhLnNldFVzZXJJbmZvKHsgbmFtZTogcmVzLm5hbWUsIGFib3V0OiByZXMuYWJvdXQgfSk7XG4gICAgICBwb3B1cEZvcm1Qcm9maWxlLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHBvcHVwRm9ybVByb2ZpbGUuZGVsZXRlU2F2aW5nKFwi0KHQvtGF0YDQsNC90LjRgtGMXCIpKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCh7IGF2YXRhciB9KSB7XG4gIHBvcHVwRm9ybUF2YXRhci5hZGRTYXZpbmcoKTtcblxuICBhcGlcbiAgICAuc2V0UHJvZmlsZUF2YXRhcih7IGF2YXRhcjogYXZhdGFyIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgdXNlckluZm9EYXRhLnNldFVzZXJBdmF0YXIoeyBhdmF0YXI6IHJlcy5hdmF0YXIgfSk7XG4gICAgICBwb3B1cEZvcm1BdmF0YXIuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4gcG9wdXBGb3JtQXZhdGFyLmRlbGV0ZVNhdmluZyhcItCh0L7RhdGA0LDQvdC40YLRjFwiKSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayh7IG5hbWUsIGxpbmsgfSkge1xuICBwb3B1cEltYWdlLm9wZW4oeyBkYXRhOiB7IG5hbWUsIGxpbmsgfSB9KTtcbn1cblxuLy8g0L/QvtC/0LDQvyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5idXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGN1cnJlbnREYXRhID0gdXNlckluZm9EYXRhLmdldFVzZXJJbmZvKCk7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IGN1cnJlbnREYXRhLm5hbWU7XG4gIGpvYklucHV0LnZhbHVlID0gY3VycmVudERhdGEuam9iO1xuXG4gIHBvcHVwRm9ybVByb2ZpbGUub3BlbigpO1xuXG4gIGZvcm1WYWxpZGF0b3JBZGROYW1lLmRlbGV0ZU1pc3Rha2VzKCk7XG59KTtcbi8vINC/0L7Qv9Cw0L8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGZvcm1BZGRDYXJkcy5yZXNldCgpO1xuICBmb3JtVmFsaWRhdG9yQWRkQ2FyZHMuZGVsZXRlTWlzdGFrZXMoKTtcbiAgcG9wdXBGb3JtQ2FyZC5vcGVuKCk7XG59KTtcbi8vINC/0L7Qv9Cw0L8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcbmJ1dHRvbkVkaXRBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgZm9ybVZhbGlkYXRvckFkZEF2YXRhci5kZWxldGVNaXN0YWtlcygpO1xuICBwb3B1cEZvcm1BdmF0YXIub3BlbigpO1xufSk7XG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgLnRoZW4oKFtyZXMsIGl0ZW1zXSkgPT4ge1xuICAgIHVzZXJJbmZvRGF0YS5zZXRVc2VySW5mbyhyZXMpO1xuICAgIHVzZXJJbmZvRGF0YS5zZXRVc2VyQXZhdGFyKHJlcyk7XG4gICAgY3VycmVudFVzZXJJZCA9IHJlcy5faWQ7XG4gICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGl0ZW1zLCByZXMuX2lkKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHtiYXNlVXJsLCBoZWFkZXJzfSl7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xuICB9XG5cbiBzZXRVc2VySW5mbyh7bmFtZSwgYWJvdXR9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSlcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBzZXROZXdDYXJkKHtuYW1lLCBsaW5rfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtuYW1lLCBsaW5rfSlcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBzZXRQcm9maWxlQXZhdGFyKHsgYXZhdGFyIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGlkKSB7XG5cbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBsaWtlUmVtb3ZlKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6WyJidXR0b25FZGl0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnV0dG9uQWRkIiwiYnV0dG9uRWRpdEF2YXRhciIsInBvcHVwUHJvZmlsZSIsInBvcHVwUGxhY2UiLCJwb3B1cENhcmQiLCJwb3B1cEF2YXRhciIsInBvcHVwRGVsIiwicG9wdXBDbG9zZUJ1dHRvblByb2ZpbGUiLCJwb3B1cENsb3NlQnV0dG9uUGxhY2UiLCJwb3B1cENsb3NlQnV0dG9uSW1hZ2UiLCJwb3B1cENsb3NlQnV0dG9uQXZhdGFyIiwicG9wdXBDbG9zZUJ1dHRvbkNvbmZpcm0iLCJwb3B1cEltZyIsInBvcHVwVGl0bGUiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVJbmZvIiwicHJvZmlsZUF2YXRhciIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicG9wdXBDb250YWluZXIiLCJmb3JtQWRkTmFtZSIsImZvcm1BZGRBdmF0YXIiLCJmb3JtQWRkQ2FyZHMiLCJjYXJkc0NvbnRhaW5lciIsIkNhcmQiLCJkYXRhIiwic2VsZWN0b3JUZW1wbGF0ZSIsImhhbmRsZXIiLCJ0aGlzIiwiX2RhdGEiLCJfc2VsZWN0b3JUZW1wbGF0ZSIsIl9vbkltYWdlQ2xpY2siLCJpbWFnZUNsaWNrIiwiX29uUmVtb3ZlIiwicmVtb3ZlIiwiX29uTGlrZSIsImxpa2UiLCJfcmVtb3ZlTGlrZSIsInJlbW92ZUxpa2UiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9pbWFnZSIsIl90aXRsZSIsIl9saWtlQnV0dG9uIiwiX3JlbW92ZUJ1dHRvbiIsIl9saWtlQ291bnQiLCJfaXNMaWtlZCIsImxpa2VzIiwiZmluZCIsIml0ZW0iLCJfaWQiLCJjdXJyZW50VXNlcklkIiwic3JjIiwibGluayIsImFsdCIsIm5hbWUiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl9zZXRFdmVudExpc3RlbmVycyIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZXJMaWtlIiwib3duZXIiLCJfaGFuZGxlclJlbW92ZSIsImNsYXNzTGlzdCIsImFkZCIsIm5ld0xpa2VzIiwiY29uc29sZSIsImxvZyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiaXRlbXMiLCJmb3JFYWNoIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2hpZGVJbnB1dEVycm9yIiwic2V0QXR0cmlidXRlIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInJlbW92ZUF0dHJpYnV0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZW5hYmxlQnV0dG9uIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImZvcm1TZWxlY3RvciIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImJ1dHRvbkNsb3NlIiwiX3BvcHVwIiwiX2Nsb3NlQnV0dG9uIiwiX3NhdmVCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzYXZlQnV0dG9uVGl0bGUiLCJQb3B1cFdpdGhJbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJfaGFuZGxlU3VibWl0IiwiX2Zvcm0iLCJzZXRFdmVudExpc3RlbmVycyIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJqb2IiLCJhdmF0YXIiLCJfbmFtZSIsIl9pbmZvIiwiX2F2YXRhciIsImFib3V0IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiY3VycmVudERhdGEiLCJyZW1vdmVDYWxsYmFjayIsIl9jdXJyZW50RGF0YSIsIl9yZW1vdmVDYWxsYmFjayIsImFwaSIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfaGFuZGxlUmVzcG9uc2UiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF1dGhvcml6YXRpb24iLCJmb3JtVmFsaWRhdG9yQWRkTmFtZSIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JtVmFsaWRhdG9yQWRkQ2FyZHMiLCJmb3JtVmFsaWRhdG9yQWRkQXZhdGFyIiwidXNlckluZm9EYXRhIiwicG9wdXBDb25maXJtIiwiYWRkU2F2aW5nIiwiZGVsZXRlQ2FyZCIsImNhdGNoIiwiZXJyIiwiZmluYWxseSIsImRlbGV0ZVNhdmluZyIsInBvcHVwSW1hZ2UiLCJwb3B1cEZvcm1Qcm9maWxlIiwic2V0VXNlckluZm8iLCJwb3B1cEZvcm1DYXJkIiwic2V0TmV3Q2FyZCIsIm5ld25hbWUiLCJjYXJkc0xpc3QiLCJhZGROZXdJdGVtIiwiY3JlYXRlQ2FyZCIsInBvcHVwRm9ybUF2YXRhciIsInNldFByb2ZpbGVBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlT3BlbkNvbmZpcm1Qb3B1cCIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZUxpa2VSZW1vdmUiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtIiwibGlrZUNhbGxiYWNrIiwibGlrZUNhcmQiLCJ1cGRhdGVkRGF0YSIsImxpa2VSZW1vdmUiLCJvcGVuIiwiZ2V0VXNlckluZm8iLCJkZWxldGVNaXN0YWtlcyIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsInJlbmRlckl0ZW1zIl0sInNvdXJjZVJvb3QiOiIifQ==